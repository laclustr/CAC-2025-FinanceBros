---
export const prerender = false;
import { hasOnboarded } from '../../lib/auth/hasOnboarded';
import Layout from '../../layouts/DashboardLayout.astro';
import DashboardNav from '../../components/DashboardComps/DashboardNav.astro';
import Header from '../../components/DashboardComps/Header.astro';

const { cookies, redirect } = Astro;
const token = cookies.get('token')?.value;

const [user, onboarded] = await hasOnboarded(token);

if (!user) {
  return redirect('/login/sign-in');
}

if (!onboarded) {
  return redirect('/login/onboarding');
}
---

<Layout title="Purchases">
  <main class="pt-20"/>
  <Header />
  <DashboardNav />
</Layout>
